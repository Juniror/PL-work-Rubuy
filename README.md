# Read Write File with Ruby  

### Read
ในการทำอะไรกับไฟล์เราจำเป็นต้องกำหนดสิทธิในการเข้าถึงไฟล์นั้นๆก่อนด้วย เช่น **r**, **w**, **a**  
และการอ่านจะมีอยู๋ 2 แบบ คือ  

1. **File**  
2. **IO**  

> IO เป็นคลาสแม่ของ File  

วิธีการอ่านไฟล์มีหลายแบบ เช่น:  
- **อ่านทั้งไฟล์ทีเดียว** → `File.read` หรือ `IO.read` (คืนค่าเป็น String และโหลดเข้า memory ทั้งหมด)  
- **อ่านทีละบรรทัด/ทีละตัว** → `IO.foreach`, `file.each_line`, `file.gets` (ประหยัด memory เพราะไม่โหลดทั้งหมด)  


#### ประเภทของการอ่าน  

| Mode   | Description |
|--------|-------------|
| `"r"`   | อ่านเท่านั้น pointer ชี้จุดเริ่มต้นของไฟล์ |
| `"r+"`  | อ่านและเขียน pointer ชี้จุดเริ่มต้นของไฟล์ |
| `"w"`   | เขียนเท่านั้น หากไม่มีไฟล์จะทำการเขียนขึ้นมาใหม่ หากมีอยู่แล้วจะเขียนทับ |
| `"w+"`  | อ่านและเขียน หากไม่มีไฟล์จะทำการเขียนขึ้นมาใหม่ หากมีอยู่แล้วจะเขียนทับ |
| `"a"`   | เขียนเท่านั้น pointer ชี้ท้ายของไฟล์ หากไม่มีไฟล์จะเขียนมาใหม่ |
| `"a+"`  | อ่านและเขียน pointer ชี้ท้ายของไฟล์ หากไม่มีไฟล์จะเขียนมาใหม่ |
| `"b"`   | ใช้เป็นโหมด binary เช่น `rb`, `wb` |

---

### File
เป็นคลาสย่อยของ IO และใช้เพื่ออ่านไฟล์โดยเฉพาะ  
ต่างจาก IO ที่ใช้ในระดับ OS  

```ruby
fileobject = File.new("example.txt", "r")

# อ่านทั้งไฟล์ 
puts fileobject.read

# อ่านทีละบรรทัด
fileobject.each { |line| puts line }

fileobject.close
```
### IO 
ไม่ค่อยนิยมใช้ในการอ่านไฟล์ เพราะใช้ยาก ในที่นี้จะใช้ File แทนทั้งหมด
```ruby
fd = IO.sysopen("example.txt", "r")  # เปิดไฟล์แบบ system call
fileByIO = IO.new(fd)                # สร้าง IO object จาก fd

# อ่านทั้งไฟล์
puts fileByIO.read

fileByIO.rewind  # ย้าย pointer กลับไปต้นไฟล์

# อ่านทีละบรรทัด
fileByIO.readlines.each { |line| puts line }
fileByIO.close
```

### Example 
[ตัวอย่าง Ruby](rw.rb)
